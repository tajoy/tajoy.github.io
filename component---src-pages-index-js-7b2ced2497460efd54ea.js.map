{"version":3,"sources":["webpack:///./src/pages/index/friend-links/FriendLinks.js","webpack:///./src/pages/index/update-frequency/Column.js","webpack:///./src/components/CategoryLink.js","webpack:///./node_modules/gatsby/node_modules/core-js/modules/es6.string.fixed.js","webpack:///./src/pages/index.js","webpack:///./src/pages/index/photo-box/PhotoBox.js","webpack:///./node_modules/moment/locale/zh-cn.js","webpack:///./src/components/SeriesLink.js","webpack:///./src/pages/index/update-frequency/Cell.js","webpack:///./src/components/TagLink.js","webpack:///./src/pages/index/recently/Recently.js","webpack:///./src/pages/index/recently/Item.js","webpack:///./src/pages/index/update-frequency/UpdateFrequency.js"],"names":["Container","styled","div","rhythm","FriendsContainer","FriendLinks","friends","map","friend","i","key","YearOrMonth","Column","year","month","updates","update","CategoryLink","name","slug","to","style","marginRight","createHTML","this","Title","h1","Index","data","titles","location","title","Math","floor","random","length","posts","allMarkdown","updateFrequency","allFriend","edges","node","pageQuery","PhotoAlbum","StyledMarquee","Marquee","Picture","img","props","width","height","RANDOM_CACHE","PhotoBox","pictures","items","count","copyItems","i1","parseInt","i2","temp","slice","randomPickup","allFile","splitted","index","picture","push","convert","childImageSharp","fixed","Component","src","onClick","navigate","fields","url","delay","duration","interval","direction","moment","defineLocale","months","split","monthsShort","weekdays","weekdaysShort","weekdaysMin","longDateFormat","LT","LTS","L","LL","LLL","LLLL","l","ll","lll","llll","meridiemParse","meridiemHour","hour","meridiem","minute","isLower","hm","calendar","sameDay","nextDay","nextWeek","lastDay","lastWeek","sameElse","dayOfMonthOrdinalParse","ordinal","number","period","relativeTime","future","past","s","ss","m","mm","h","hh","d","dd","M","MM","y","yy","week","dow","doy","factory","SeriesLink","theme","light","LIGHT","UPDATE","FREQUENCY","min","articles","dark","DARK","HoverPopup","transition","Content","Corner","Cell","setShowPopup","show","self","e","setState","showPopup","state","render","popup","weekOfYear","day","begin","clone","format","end","in","unmountOnExit","timeout","article","onMouseEnter","onMouseLeave","React","TagLink","StyledLink","Link","Recently","context","post","Pair","withSizes","excerpt","isDesktop","date","type","id","CellsContainer","Example","UpdateFrequency","now","weeks","subtract","get","findUpdate","weekYear","weeksInYear","cells","found","columns","findColumn","cell","column","reverse"],"mappings":"gHAAA,sGAaMA,EAAYC,IAAOC,IAAV,yEAAGD,CAAH,2CAIGE,YAAO,IAInBC,EAAmBH,IAAOC,IAAV,gFAAGD,CAAH,qDAkBPI,UAbK,SAAC,GAAsB,IAAD,IAAnBC,eAAmB,MAAT,GAAS,EACxC,OACE,kBAACN,EAAD,KACE,oCACA,kBAACI,EAAD,KACGE,EAAQC,KAAI,SAACC,EAAQC,GAAT,OACX,kBAAC,UAAD,CAAQC,IAAKD,EAAGD,OAAQA,W,oCChClC,4HAgBMR,EAAYC,IAAOC,IAAV,wEAAGD,CAAH,0GAECE,YAAO,IAOjBQ,EAAcV,IAAOC,IAAV,0EAAGD,CAAH,2GAGLE,YAAO,IAsBJS,UAjBA,SAAC,GAAmC,IAAjCC,EAAgC,EAAhCA,KAAMC,EAA0B,EAA1BA,MAA0B,IAAnBC,eAAmB,MAAT,GAAS,EAChD,OACE,kBAACf,EAAD,KACE,kBAACW,EAAD,KACa,IAAVG,EACMD,EADN,MAEIC,EAAQ,GAAK,GAAM,GAAe,KAAVA,EACtBA,EAAQ,EADX,KAEA,IAELC,EAAQR,KAAI,SAACS,EAAQP,GAAT,OACX,kBAAC,UAAD,CAAMC,IAAKD,EAAGO,OAAQA,U,+FC7BfC,IARM,SAAC,GAAoB,IAAlBC,EAAiB,EAAjBA,KAAMC,EAAW,EAAXA,KAC5B,OACE,kBAAC,OAAD,CAAMC,GAAE,aAAeD,EAAf,IAAwBE,MAAO,CAAEC,YAAanB,YAAO,MAC1De,K,oCCRP,EAAQ,OAAR,CAA0B,SAAS,SAAUK,GAC3C,OAAO,WACL,OAAOA,EAAWC,KAAM,KAAM,GAAI,S,kCCJtC,0KAaMxB,EAAYC,IAAOC,IAAV,uEAAGD,CAAH,gBACHE,YAAO,KAEbsB,EAAQxB,IAAOyB,GAAV,mEAAGzB,CAAH,gDAEIE,YAAO,IA4BPwB,UAzBD,SAAC,GAAwB,IAAtBC,EAAqB,EAArBA,KACTC,GAD8B,EAAfC,SACN,CACb,eACA,YACA,SACA,cACA,SACA,SACA,SACA,iBAEIC,EAAQF,EAAOG,KAAKC,MAAMD,KAAKE,SAAWL,EAAOM,SAEvD,OACE,kBAACnC,EAAD,KACE,kBAACyB,EAAD,KAAQM,GACR,kBAAC,UAAD,CAAUK,MAAOR,EAAKS,YAAYD,QAClC,kBAAC,UAAD,MACA,kBAAC,UAAD,MACA,kBAAC,UAAD,CAAiBrB,QAASa,EAAKU,gBAAgBvB,UAC/C,kBAAC,UAAD,CAAaT,QAASsB,EAAKW,UAAUC,MAAMjC,KAAI,qBAAGkC,YAOjD,IAAMC,EAAS,c,k8BCvCtB,IAAM1C,EAAYC,IAAOC,IAAV,0EAAGD,CAAH,wBAEGE,YAAO,IAInBwC,EAAa1C,IAAOC,IAAV,2EAAGD,CAAH,kFAMV2C,EAAgB3C,YAAO4C,KAAV,8EAAG5C,CAAH,MAEb6C,EAAU7C,IAAO8C,IAAV,wEAAG9C,CAAH,0CACF,SAAA+C,GAAK,OAAOA,EAAMC,MAAb,QACJ,SAAAD,GAAK,OAAOA,EAAME,OAAb,QAIbC,EAAe,KAgHJC,UAhGE,WAmCf,IAlCA,IA+BMC,EA9Ca,SAACC,EAAOC,GAC3B,GAAIJ,EAAc,OAAOA,EAEzB,IADA,IAAMK,EAAS,EAAOF,GACb7C,EAAI,EAAGA,EAAuB,EAAnB+C,EAAUrB,OAAY1B,IAAK,CAC7C,IAAMgD,EAAKC,SAAS,GAAG1B,KAAKE,SAAWsB,EAAUrB,QAC3CwB,EAAKD,SAAS,GAAG1B,KAAKE,SAAWsB,EAAUrB,QAC3CyB,EAAOJ,EAAUC,GACvBD,EAAUC,GAAMD,EAAUG,GAC1BH,EAAUG,GAAMC,EAGlB,OADAT,EAAeK,EAAUK,MAAM,EAAGN,GAoCjBO,CA/BG,OA8BjBC,QAAQvB,MAAMjC,KAAI,qBAAGkC,QACmB,IACrCuB,EAAW,CAAC,GAAI,GAAI,GAAI,IAC1BC,EAAQ,EACHxD,EAAI,EAAGA,EAAI4C,EAASlB,OAAQ1B,IAAK,CACxC,IAAMyD,EAAUb,EAAS5C,GACzBuD,EAASC,GAAOE,KAAKD,GACrBD,GAASA,EAAQ,GAAK,EAGxB,IAAMG,EAAU,SAAAf,GACd,OAAOA,EAAS9C,KAAI,SAAC2D,EAASzD,GAC5B,MAAO,CACLwC,MAAOiB,EAAQG,gBAAgBC,MAAMrB,MACrCC,OAAQgB,EAAQG,gBAAgBC,MAAMpB,OACtCqB,UAAW,kBACT,kBAACzB,EAAD,CACEpC,IAAKD,EACLwC,MAAOiB,EAAQG,gBAAgBC,MAAMrB,MACrCC,OAAQgB,EAAQG,gBAAgBC,MAAMpB,OACtCsB,IAAKN,EAAQG,gBAAgBC,MAAME,IACnCC,QAAS,WACPC,mBAASR,EAAQS,OAAOC,cAQpC,OACE,kBAAC5E,EAAD,KACE,oCACA,kBAAC2C,EAAD,KACE,kBAACC,EAAD,CACEiC,MAAO,IACPC,SAAU,IACVC,SAAU,IACVzB,MAAOc,EAAQJ,EAAS,MAE1B,kBAACpB,EAAD,CACEiC,MAAO,IACPC,SAAU,IACVC,SAAU,IACVC,UAAU,OACV1B,MAAOc,EAAQJ,EAAS,MAE1B,kBAACpB,EAAD,CACEiC,MAAO,IACPC,SAAU,IACVC,SAAU,IACVC,UAAU,OACV1B,MAAOc,EAAQJ,EAAS,MAE1B,kBAACpB,EAAD,CACEiC,MAAO,IACPC,SAAU,IACVC,SAAU,IACVzB,MAAOc,EAAQJ,EAAS,U,qBCtIlC,EAAQ,QAUC,SAAUiB,GACjB,aAEWA,EAAOC,aAAa,QAAS,CACtCC,OAAQ,wCAAwCC,MAAM,KACtDC,YAAa,yCAAyCD,MAAM,KAC5DE,SAAU,8BAA8BF,MAAM,KAC9CG,cAAe,uBAAuBH,MAAM,KAC5CI,YAAa,gBAAgBJ,MAAM,KACnCK,eAAgB,CACdC,GAAI,QACJC,IAAK,WACLC,EAAG,aACHC,GAAI,YACJC,IAAK,kBACLC,KAAM,sBACNC,EAAG,WACHC,GAAI,YACJC,IAAK,kBACLC,KAAM,uBAERC,cAAe,oBACfC,aAAc,SAAsBC,EAAMC,GAKxC,OAJa,KAATD,IACFA,EAAO,GAGQ,OAAbC,GAAkC,OAAbA,GAAkC,OAAbA,EACrCD,EACe,OAAbC,GAAkC,OAAbA,EACvBD,EAAO,GAGPA,GAAQ,GAAKA,EAAOA,EAAO,IAGtCC,SAAU,SAAkBD,EAAME,EAAQC,GACxC,IAAIC,EAAY,IAAPJ,EAAaE,EAEtB,OAAIE,EAAK,IACA,KACEA,EAAK,IACP,KACEA,EAAK,KACP,KACEA,EAAK,KACP,KACEA,EAAK,KACP,KAEA,MAGXC,SAAU,CACRC,QAAS,SACTC,QAAS,SACTC,SAAU,YACVC,QAAS,SACTC,SAAU,YACVC,SAAU,KAEZC,uBAAwB,iBACxBC,QAAS,SAAiBC,EAAQC,GAChC,OAAQA,GACN,IAAK,IACL,IAAK,IACL,IAAK,MACH,OAAOD,EAAS,IAElB,IAAK,IACH,OAAOA,EAAS,IAElB,IAAK,IACL,IAAK,IACH,OAAOA,EAAS,IAElB,QACE,OAAOA,IAGbE,aAAc,CACZC,OAAQ,MACRC,KAAM,MACNC,EAAG,KACHC,GAAI,OACJC,EAAG,OACHC,GAAI,QACJC,EAAG,OACHC,GAAI,QACJC,EAAG,MACHC,GAAI,OACJC,EAAG,OACHC,GAAI,QACJC,EAAG,MACHC,GAAI,QAENC,KAAM,CAEJC,IAAK,EAELC,IAAK,KArGuFC,CAAQ,EAAQ,U,s4MCMnGC,IARI,SAAC,GAAoB,IAAlBvH,EAAiB,EAAjBA,KAAMC,EAAW,EAAXA,KAC1B,OACE,kBAAC,OAAD,CAAMC,GAAE,WAAaD,EAAb,IAAsBE,MAAO,CAAEC,YAAanB,YAAO,MACxDe,K,0nBCKP,IAAMlB,EAAYC,IAAOC,IAAV,kEAAGD,CAAH,sGAGO,SAAA+C,GAAK,OACvB0F,IAAM,OAAQ,CACZC,MAAOC,IAAMC,OAAOC,UAAU9G,KAAK+G,IAAI/F,EAAMhC,OAAOgI,SAAS7G,OAAQ,IACrE8G,KAAMC,IAAKL,OAAOC,UAAU9G,KAAK+G,IAAI/F,EAAMhC,OAAOgI,SAAS7G,OAAQ,SAOnEgH,EAAaC,IAAWlJ,IAAd,IAILC,YAAO,IAmBZkJ,EAAUpJ,IAAOC,IAAV,gEAAGD,CAAH,wQACFE,YAAO,GAMJA,YAAO,IAGJA,YAAO,IAIVA,YAAO,IACHA,YAAO,IACNA,YAAO,IAGTA,YAAO,KAIlBmJ,EAASrJ,IAAOC,IAAV,+DAAGD,CAAH,gKAEIE,aAAQ,IACbA,YAAO,IACNA,YAAO,IAGMA,YAAO,MAAUA,aAAQ,MAI5CoJ,E,oBACJ,WAAYvG,GAAQ,IAAD,SACjB,cAAMA,IAAN,MAMFwG,aAAe,SAAAC,GACb,IAAMC,E,yHAAI,IACV,OAAO,SAAAC,GACLD,EAAKE,SAAS,CAAEC,UAAWJ,MAR7B,EAAKK,MAAQ,CACXD,WAAW,GAHI,E,0GAcnBE,OAAA,WAAU,IACAF,EAAcrI,KAAKsI,MAAnBD,UACA7I,EAAWQ,KAAKwB,MAAhBhC,OAEJgJ,EAAQ,KACd,GAAIhJ,QAAyC,OAAO,qCAClD,GAAIA,EAAOgI,UAAYhI,EAAOgI,SAAS,IAAMhI,EAAOgI,SAAS,GAAI,CAC/D,IAAMX,EAAOpD,MAASpE,KAAKG,EAAOH,MAAMwH,KAAKrH,EAAOiJ,YAAYC,IAAI,GAC9DC,EAAQ9B,EAAK+B,QAAQF,IAAI,GAAGG,OAAO,MACnCC,EAAMjC,EAAK+B,QAAQF,IAAI,GAAGG,OAAO,MACvCL,EACE,kBAACb,EAAD,CAAYoB,GAAIV,EAAWW,eAAa,EAACC,QAAS,KAChD,kBAACpB,EAAD,KACE,mCACA,2BAAIc,GACJ,iCAAOG,GACP,qCACCtJ,EAAOgI,SAASzI,KAAI,SAACmK,EAASjK,GAAV,OACnB,uBAAGC,IAAKD,GAAIiK,EAAQ3I,WAGxB,kBAACuH,EAAD,OAIN,OACE,kBAACtJ,EAAD,CACEgB,OAAQA,EACR2J,aAAcnJ,KAAKgI,cAAa,GAChCoB,aAAcpJ,KAAKgI,cAAa,IAE/BQ,I,GA9CUa,IAAMtG,WAoDVgF,a,6FCvHAuB,IAXC,SAAC,GAAoB,IAAlB5J,EAAiB,EAAjBA,KAAMC,EAAW,EAAXA,KACvB,OACE,kBAAC,OAAD,CACEC,GAAE,SAAWD,EAAX,IACFE,MAAO,CAAEC,YAAanB,YAAO,MAE5Be,K,wICHDlB,EAAYC,IAAOC,IAAV,0EAAGD,CAAH,sEAGHE,YAAO,GAELA,YAAO,IAIf4K,EAAa9K,YAAO+K,QAAV,2EAAG/K,CAAH,wKACJE,YAAO,GACJA,YAAO,IAGLA,YAAO,KAmBT8K,UAZE,SAAC,GAA6B,IAAD,IAA1B7I,aAA0B,MAAlB,GAAkB,EAAd8I,EAAc,EAAdA,QAC9B,OACE,kBAAClL,EAAD,KACE,oCACCoC,EAAM7B,KAAI,SAAC4K,EAAM1K,GAAP,OACT,kBAAC,UAAD,eAAMC,IAAKD,EAAGyK,QAASA,GAAaC,OAEtC,kBAACJ,EAAD,CAAY3J,GAAG,mBAAf,c,kCCtCN,sIAgBMpB,GAhBN,8BAgBkBC,IAAOC,IAAV,sEAAGD,CAAH,yIAKSyI,IAAM,OAAQ,CAChCC,MAAO,YACPM,KAAM,gBAQNxH,EAAQxB,IAAOC,IAAV,kEAAGD,CAAH,2NAEIE,YAAO,IACVA,YAAO,IAEFA,YAAO,KAUlBiL,EAAOnL,IAAOC,IAAV,iEAAGD,CAAH,yBAoBKoL,uBAhBF,SAAC,GAAyC,IAAD,IAAtC1G,cAAsC,MAA7B,GAA6B,EAC9C5C,GAD8C,EAAzBuJ,QAAyB,EAAhBC,UACtB5G,EAAO5C,OAAS4C,EAAOxD,MAErC,OACE,kBAACnB,EAAD,KACE,kBAACyB,EAAD,KACE,kBAAC,OAAD,CAAML,GAAE,GAAKuD,EAAOC,KAAQ7C,GAC5B,kBAACqJ,EAAD,KACGzG,EAAO6G,MAAQ,kBAAC,IAAD,CAAMC,KAAK,IAAIC,GAAG,aACjC/G,EAAO6G,MAAQvG,IAAON,EAAO6G,MAAMnB,OAAO,qB,yKC9C/CrK,EAAYC,IAAOC,IAAV,iFAAGD,CAAH,iCAGDE,YAAO,IAIfwL,EAAiB1L,IAAOC,IAAV,sFAAGD,CAAH,oHASd2L,EAAU3L,IAAOC,IAAV,+EAAGD,CAAH,8JACIE,YAAO,GACRA,YAAO,GAQPA,YAAO,KA2ER0L,UAvES,SAAC,GAwBvB,IAxB6C,IAAD,IAAnB9K,eAAmB,MAAT,GAAS,EACtC+K,EAAM7G,MACNkF,EAAQlF,MAASpE,KAAKiL,EAAIjL,OAAS,GACnCkL,EAAQD,EAAI1B,QAAQ4B,SAAS7B,GAAO8B,IAAI,SAExCC,EAAa,SAAAvE,GACjB,IAAK,IAAIlH,EAAI,EAAGA,EAAIM,EAAQoB,OAAQ1B,IAAK,CACvC,IAAMO,EAASD,EAAQN,GACvB,GAAIO,EAAOH,OAAS8G,EAAEwE,YAAcnL,EAAOiJ,aAAetC,EAAEoE,QAE1D,OAAO,OAAP,wBAAY/K,GAAZ,IAAoBF,MAAO6G,EAAE7G,UAIjC,MAAO,CACLD,KAAM8G,EAAEwE,WACRrL,MAAO6G,EAAE7G,QACTsL,YAAazE,EAAEyE,cACfnC,WAAYtC,EAAEoE,QACd/C,SAAU,KAIRqD,EAAQ,GACL5L,EAAI,EAAGA,EAAIsL,EAAOtL,IAAK,CAC9B,IACM6L,EAAQJ,EADHJ,EAAI1B,QAAQ4B,SAAS/G,IAAOH,SAASrE,EAAG,WAEnD4L,EAAMlI,KAAKmI,GAkBb,IAhBA,IAAMC,EAAU,GACVC,EAAa,SAAAC,GACjB,IAAK,IAAIhM,EAAI,EAAGA,EAAI8L,EAAQpK,OAAQ1B,IAAK,CACvC,IAAMiM,EAASH,EAAQ9L,GACvB,GAAIgM,EAAK3L,QAAU4L,EAAO5L,MACxB,OAAO4L,EAGX,IAAMA,EAAS,CACb7L,KAAM4L,EAAK5L,KACXC,MAAO2L,EAAK3L,MACZC,QAAS,IAGX,OADAwL,EAAQpI,KAAKuI,GACNA,GAEAjM,EAAI,EAAGA,EAAI4L,EAAMlK,OAAQ1B,IAAK,CACrC,IAAMgM,EAAOJ,EAAM5L,GACJ+L,EAAWC,GACnB1L,QAAQoD,KAAKsI,GAItB,OACE,kBAACzM,EAAD,KACE,oCACA,kBAAC2L,EAAD,KACGY,EAAQhM,KAAI,SAACmM,EAAQjM,GAAT,OAAe,kBAAC,UAAD,eAAQC,IAAKD,GAAOiM,OAAYC,WAE9D,kBAACf,EAAD,UAEE,kBAAC,UAAD,CAAM5K,OAAQ,CAAEgI,SAAU,MAC1B,kBAAC,UAAD,CAAMhI,OAAQ,CAAEgI,SAAU,EAAC,MAC3B,kBAAC,UAAD,CAAMhI,OAAQ,CAAEgI,SAAU,EAAC,GAAO,MAClC,kBAAC,UAAD,CAAMhI,OAAQ,CAAEgI,SAAU,EAAC,GAAO,GAAO,MACzC,kBAAC,UAAD,CAAMhI,OAAQ,CAAEgI,SAAU,EAAC,GAAO,GAAO,GAAO,MANlD","file":"component---src-pages-index-js-7b2ced2497460efd54ea.js","sourcesContent":["import React from \"react\"\nimport { Link, graphql } from \"gatsby\"\n\nimport styled from \"styled-components\"\n\nimport { rhythm } from \"../../../utils/typography\"\n\nimport theme from \"styled-theming\"\n\nimport { LIGHT, DARK } from \"../../../theme/colors\"\n\nimport Friend from \"./Friend\"\n\nconst Container = styled.div`\n  h2 {\n    padding: 0;\n    margin: 0;\n    margin-top: ${rhythm(1)};\n  }\n`\n\nconst FriendsContainer = styled.div`\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n`\nconst FriendLinks = ({ friends = [] }) => {\n  return (\n    <Container>\n      <h2>友情链接</h2>\n      <FriendsContainer>\n        {friends.map((friend, i) => (\n          <Friend key={i} friend={friend} />\n        ))}\n      </FriendsContainer>\n    </Container>\n  )\n}\n\nexport default FriendLinks\n","import React from \"react\"\nimport { Link, graphql } from \"gatsby\"\n\nimport styled from \"styled-components\"\n\nimport moment from \"moment\"\nimport \"moment/locale/zh-cn\"\n\nimport { rhythm } from \"../../../utils/typography\"\n\nimport theme from \"styled-theming\"\n\nimport { LIGHT, DARK } from \"../../../theme/colors\"\n\nimport Cell from \"./Cell\"\n\nconst Container = styled.div`\n  margin: 0 2px;\n  margin-top: ${rhythm(2)};\n  width: 26px;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n`\n\nconst YearOrMonth = styled.div`\n  margin: 0 8px;\n  white-space: nowrap;\n  height: ${rhythm(1)};\n  text-align: center;\n  transform: translateX(4px) rotate(-90deg);\n`\n\nconst Column = ({ year, month, updates = [] }) => {\n  return (\n    <Container>\n      <YearOrMonth>\n        {month === 0\n          ? `${year} 年`\n          : (month + 1) % 3 === 0 && month !== 11\n          ? `${month + 1} 月`\n          : \"\"}\n      </YearOrMonth>\n      {updates.map((update, i) => (\n        <Cell key={i} update={update} />\n      ))}\n    </Container>\n  )\n}\n\nexport default Column\n","import React from \"react\"\n\nimport { Link } from \"gatsby\"\n\nimport styled from \"styled-components\"\nimport { rhythm, scale } from \"../utils/typography\"\n\nconst CategoryLink = ({ name, slug }) => {\n  return (\n    <Link to={`/category/${slug}/`} style={{ marginRight: rhythm(0.2) }}>\n      {name}\n    </Link>\n  )\n}\n\nexport default CategoryLink\n","'use strict';\n// B.2.3.6 String.prototype.fixed()\nrequire('./_string-html')('fixed', function (createHTML) {\n  return function fixed() {\n    return createHTML(this, 'tt', '', '');\n  };\n});\n","import React from \"react\"\nimport { Link, graphql } from \"gatsby\"\n\nimport styled from \"styled-components\"\nimport { rhythm } from \"../utils/typography\"\n\nimport FriendLinks from \"./index/friend-links/FriendLinks\"\nimport UpdateFrequency from \"./index/update-frequency/UpdateFrequency\"\nimport Recently from \"./index/recently/Recently\"\n\nimport PhotoBox from \"./index/photo-box/PhotoBox\"\nimport ShaderBox from \"./index/shader-box/ShaderBox\"\n\nconst Container = styled.div`\n  margin: ${rhythm(0.5)};\n`\nconst Title = styled.h1`\n  text-align: center;\n  font-size: ${rhythm(2)} !important;\n`\n\nconst Index = ({ data, location }) => {\n  const titles = [\n    \"Tajoy's Blog\",\n    \"欢迎来到我的博客~\",\n    \"来啦~ 老弟\",\n    \"此站我建, 求个留言!\",\n    \"来啦~ 老妹\",\n    \"来啦~ 老铁\",\n    \"来啦~ 兄贵\",\n    \"常回家看看~ 回家看看~\",\n  ]\n  const title = titles[Math.floor(Math.random() * titles.length)]\n\n  return (\n    <Container>\n      <Title>{title}</Title>\n      <Recently posts={data.allMarkdown.posts} />\n      <ShaderBox />\n      <PhotoBox />\n      <UpdateFrequency updates={data.updateFrequency.updates} />\n      <FriendLinks friends={data.allFriend.edges.map(({ node }) => node)} />\n    </Container>\n  )\n}\n\nexport default Index\n\nexport const pageQuery = graphql`\n  query {\n    site {\n      siteMetadata {\n        title\n      }\n    }\n    allFriend {\n      edges {\n        node {\n          name\n          link\n          headPic\n          description\n        }\n      }\n    }\n    updateFrequency {\n      updates {\n        year\n        weeksInYear\n        weekOfYear\n        articles\n      }\n    }\n    allMarkdown(limit: 5) {\n      posts {\n        id\n        excerpt(pruneLength: 160)\n        fields {\n          slug\n          url\n          title\n          date(formatString: \"YYYY-MM-DD\")\n          description\n          category {\n            name\n            slug\n          }\n          tags {\n            name\n            slug\n          }\n          series {\n            name\n            slug\n          }\n        }\n      }\n    }\n  }\n`\n","import React from \"react\"\nimport { Link, useStaticQuery, graphql, navigate } from \"gatsby\"\n\nimport styled from \"styled-components\"\n\nimport { rhythm } from \"../../../utils/typography\"\n\nimport Marquee from \"../../../components/Marquee\"\n\nconst Container = styled.div`\n  h2 {\n    margin-top: ${rhythm(2)};\n  }\n`\n\nconst PhotoAlbum = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: space-evenly;\n  flex-wrap: wrap;\n`\nconst StyledMarquee = styled(Marquee)``\n\nconst Picture = styled.img`\n  width: ${props => `${props.width}px`};\n  height: ${props => `${props.height}px`};\n  cursor: pointer;\n`\n\nlet RANDOM_CACHE = null\n\nconst randomPickup = (items, count) => {\n  if (RANDOM_CACHE) return RANDOM_CACHE\n  const copyItems = [...items]\n  for (let i = 0; i < copyItems.length * 3; i++) {\n    const i1 = parseInt(`${Math.random() * copyItems.length}`)\n    const i2 = parseInt(`${Math.random() * copyItems.length}`)\n    const temp = copyItems[i1]\n    copyItems[i1] = copyItems[i2]\n    copyItems[i2] = temp\n  }\n  RANDOM_CACHE = copyItems.slice(0, count)\n  return RANDOM_CACHE\n}\n\nconst PhotoBox = () => {\n  const allPictures = useStaticQuery(graphql`\n    query PhotoBox {\n      allFile(\n        filter: { sourceInstanceName: { eq: \"photos\" } }\n        sort: { fields: fields___date, order: DESC }\n      ) {\n        edges {\n          node {\n            fields {\n              url\n              date\n            }\n            childImageSharp {\n              fixed(\n                width: 320\n                height: 320\n                quality: 90\n                background: \"rgba(0,0,0,0)\"\n                toFormat: PNG\n                fit: CONTAIN\n              ) {\n                src\n                width\n                height\n              }\n            }\n          }\n        }\n      }\n    }\n  `).allFile.edges.map(({ node }) => node)\n  const pictures = randomPickup(allPictures, 20)\n  const splitted = [[], [], [], []]\n  let index = 0\n  for (let i = 0; i < pictures.length; i++) {\n    const picture = pictures[i]\n    splitted[index].push(picture)\n    index = (index + 1) % 4\n  }\n\n  const convert = pictures => {\n    return pictures.map((picture, i) => {\n      return {\n        width: picture.childImageSharp.fixed.width,\n        height: picture.childImageSharp.fixed.height,\n        Component: () => (\n          <Picture\n            key={i}\n            width={picture.childImageSharp.fixed.width}\n            height={picture.childImageSharp.fixed.height}\n            src={picture.childImageSharp.fixed.src}\n            onClick={() => {\n              navigate(picture.fields.url)\n            }}\n          />\n        ),\n      }\n    })\n  }\n\n  return (\n    <Container>\n      <h2>摄影作品</h2>\n      <PhotoAlbum>\n        <StyledMarquee\n          delay={1000}\n          duration={1000}\n          interval={5000}\n          items={convert(splitted[0])}\n        />\n        <StyledMarquee\n          delay={2000}\n          duration={1000}\n          interval={5000}\n          direction=\"down\"\n          items={convert(splitted[1])}\n        />\n        <StyledMarquee\n          delay={3000}\n          duration={1000}\n          interval={5000}\n          direction=\"down\"\n          items={convert(splitted[2])}\n        />\n        <StyledMarquee\n          delay={4000}\n          duration={1000}\n          interval={5000}\n          items={convert(splitted[3])}\n        />\n      </PhotoAlbum>\n    </Container>\n  )\n}\n\nexport default PhotoBox\n","require(\"core-js/modules/es6.regexp.split\");\n\n//! moment.js locale configuration\n//! locale : Chinese (China) [zh-cn]\n//! author : suupic : https://github.com/suupic\n//! author : Zeno Zeng : https://github.com/zenozeng\n;\n\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' && typeof require === 'function' ? factory(require('../moment')) : typeof define === 'function' && define.amd ? define(['../moment'], factory) : factory(global.moment);\n})(this, function (moment) {\n  'use strict'; //! moment.js locale configuration\n\n  var zhCn = moment.defineLocale('zh-cn', {\n    months: '一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月'.split('_'),\n    monthsShort: '1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月'.split('_'),\n    weekdays: '星期日_星期一_星期二_星期三_星期四_星期五_星期六'.split('_'),\n    weekdaysShort: '周日_周一_周二_周三_周四_周五_周六'.split('_'),\n    weekdaysMin: '日_一_二_三_四_五_六'.split('_'),\n    longDateFormat: {\n      LT: 'HH:mm',\n      LTS: 'HH:mm:ss',\n      L: 'YYYY/MM/DD',\n      LL: 'YYYY年M月D日',\n      LLL: 'YYYY年M月D日Ah点mm分',\n      LLLL: 'YYYY年M月D日ddddAh点mm分',\n      l: 'YYYY/M/D',\n      ll: 'YYYY年M月D日',\n      lll: 'YYYY年M月D日 HH:mm',\n      llll: 'YYYY年M月D日dddd HH:mm'\n    },\n    meridiemParse: /凌晨|早上|上午|中午|下午|晚上/,\n    meridiemHour: function meridiemHour(hour, meridiem) {\n      if (hour === 12) {\n        hour = 0;\n      }\n\n      if (meridiem === '凌晨' || meridiem === '早上' || meridiem === '上午') {\n        return hour;\n      } else if (meridiem === '下午' || meridiem === '晚上') {\n        return hour + 12;\n      } else {\n        // '中午'\n        return hour >= 11 ? hour : hour + 12;\n      }\n    },\n    meridiem: function meridiem(hour, minute, isLower) {\n      var hm = hour * 100 + minute;\n\n      if (hm < 600) {\n        return '凌晨';\n      } else if (hm < 900) {\n        return '早上';\n      } else if (hm < 1130) {\n        return '上午';\n      } else if (hm < 1230) {\n        return '中午';\n      } else if (hm < 1800) {\n        return '下午';\n      } else {\n        return '晚上';\n      }\n    },\n    calendar: {\n      sameDay: '[今天]LT',\n      nextDay: '[明天]LT',\n      nextWeek: '[下]ddddLT',\n      lastDay: '[昨天]LT',\n      lastWeek: '[上]ddddLT',\n      sameElse: 'L'\n    },\n    dayOfMonthOrdinalParse: /\\d{1,2}(日|月|周)/,\n    ordinal: function ordinal(number, period) {\n      switch (period) {\n        case 'd':\n        case 'D':\n        case 'DDD':\n          return number + '日';\n\n        case 'M':\n          return number + '月';\n\n        case 'w':\n        case 'W':\n          return number + '周';\n\n        default:\n          return number;\n      }\n    },\n    relativeTime: {\n      future: '%s后',\n      past: '%s前',\n      s: '几秒',\n      ss: '%d 秒',\n      m: '1 分钟',\n      mm: '%d 分钟',\n      h: '1 小时',\n      hh: '%d 小时',\n      d: '1 天',\n      dd: '%d 天',\n      M: '1 个月',\n      MM: '%d 个月',\n      y: '1 年',\n      yy: '%d 年'\n    },\n    week: {\n      // GB/T 7408-1994《数据元和交换格式·信息交换·日期和时间表示法》与ISO 8601:1988等效\n      dow: 1,\n      // Monday is the first day of the week.\n      doy: 4 // The week that contains Jan 4th is the first week of the year.\n\n    }\n  });\n  return zhCn;\n});","import React from \"react\"\n\nimport { Link } from \"gatsby\"\n\nimport styled from \"styled-components\"\nimport { rhythm, scale } from \"../utils/typography\"\n\nconst SeriesLink = ({ name, slug }) => {\n  return (\n    <Link to={`/series/${slug}/`} style={{ marginRight: rhythm(0.2) }}>\n      {name}\n    </Link>\n  )\n}\n\nexport default SeriesLink\n","import React from \"react\"\nimport { Link, graphql } from \"gatsby\"\n\nimport styled from \"styled-components\"\nimport transition from \"styled-transition-group\"\n\nimport moment from \"moment\"\nimport \"moment/locale/zh-cn\"\n\nimport { rhythm } from \"../../../utils/typography\"\n\nimport theme from \"styled-theming\"\n\nimport { LIGHT, DARK } from \"../../../theme/colors\"\n\nconst Container = styled.div`\n  width: 24px;\n  height: 24px;\n  background-color: ${props =>\n    theme(\"mode\", {\n      light: LIGHT.UPDATE.FREQUENCY[Math.min(props.update.articles.length, 4)],\n      dark: DARK.UPDATE.FREQUENCY[Math.min(props.update.articles.length, 4)],\n    })};\n  border-radius: 4px;\n  border: 1px solid #0006;\n  margin: 2px;\n`\n\nconst HoverPopup = transition.div`\n  position: relative;\n  z-index: 999;\n  pointer-events: none;\n  width: ${rhythm(6)};\n\n  transform: translate(-45%, -100%);\n\n  &:enter {\n    opacity: 0.01;\n  }\n  &:enter-active {\n    opacity: 1;\n    transition: 500ms ease-in;\n  }\n  &:exit {\n    opacity: 1;\n  }\n  &:exit-active {\n    opacity: 0.01;\n    transition: 500ms ease-out;\n  }\n`\nconst Content = styled.div`\n  width: ${rhythm(6)};\n  background-color: white;\n  border: 1px solid #666;\n  z-index: 20;\n\n  h3 {\n    margin: ${rhythm(0.1)};\n    padding: 0;\n    color: black !important;\n    font-size: ${rhythm(0.5)} !important;\n    text-shadow: none !important;\n  }\n  p {\n    margin: ${rhythm(0.1)};\n    margin-top: ${rhythm(0.3)};\n    margin-left: ${rhythm(0.5)};\n    padding: 0;\n    color: black;\n    font-size: ${rhythm(0.5)} !important;\n  }\n`\n\nconst Corner = styled.div`\n  position: relative;\n  margin-top: ${rhythm(-0.5)};\n  width: ${rhythm(0.8)};\n  height: ${rhythm(0.8)};\n  background-color: white;\n  border: 1px solid #666;\n  transform: translate(${rhythm(2.65)}, ${rhythm(-0.05)}) rotate(-45deg);\n  z-index: -20;\n`\n\nclass Cell extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      showPopup: false,\n    }\n  }\n\n  setShowPopup = show => {\n    const self = this\n    return e => {\n      self.setState({ showPopup: show })\n    }\n  }\n\n  render() {\n    const { showPopup } = this.state\n    const { update } = this.props\n    // console.log(\"update\", update)\n    let popup = null\n  if (update === null || update === undefined) return <></>\n    if (update.articles && update.articles[0] && update.articles[0]) {\n      const week = moment().year(update.year).week(update.weekOfYear).day(0)\n      const begin = week.clone().day(0).format(\"ll\")\n      const end = week.clone().day(6).format(\"ll\")\n      popup = (\n        <HoverPopup in={showPopup} unmountOnExit timeout={500}>\n          <Content>\n            <h3>日期:</h3>\n            <p>{begin}</p>\n            <p> - {end}</p>\n            <h3>发布文章:</h3>\n            {update.articles.map((article, i) => (\n              <p key={i}>{article.title}</p>\n            ))}\n          </Content>\n          <Corner />\n        </HoverPopup>\n      )\n    }\n    return (\n      <Container\n        update={update}\n        onMouseEnter={this.setShowPopup(true)}\n        onMouseLeave={this.setShowPopup(false)}\n      >\n        {popup}\n      </Container>\n    )\n  }\n}\n\nexport default Cell\n","import React from \"react\"\n\nimport { Link } from \"gatsby\"\n\nimport styled from \"styled-components\"\nimport { rhythm, scale } from \"../utils/typography\"\n\nconst TagLink = ({ name, slug }) => {\n  return (\n    <Link\n      to={`/tags/${slug}/`}\n      style={{ marginRight: rhythm(0.2) }}\n    >\n      {name}\n    </Link>\n  )\n}\n\nexport default TagLink\n","import React from \"react\"\n\nimport { Link } from \"gatsby\"\n\nimport styled from \"styled-components\"\nimport theme from \"styled-theming\"\nimport { rhythm, scale } from \"../../../utils/typography\"\n\nimport Item from \"./Item\"\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  margin: ${rhythm(1)} 0;\n  h2 {\n    margin: ${rhythm(1)} 0;\n  }\n`\n\nconst StyledLink = styled(Link)`\n  margin: ${rhythm(1)} auto;\n  font-size: ${rhythm(0.8)};\n  text-align: center;\n  @media screen and (max-width: 1024px) {\n    font-size: ${rhythm(0.9)};\n  }\n  @media screen and (max-width: 480px) {\n    font-size: 18px !important;\n  }\n`\n\nconst Recently = ({ posts = [], context }) => {\n  return (\n    <Container>\n      <h2>最近发布</h2>\n      {posts.map((post, i) => (\n        <Item key={i} context={context} {...post} />\n      ))}\n      <StyledLink to=\"/article-list/1\">查看更多...</StyledLink>\n    </Container>\n  )\n}\n\nexport default Recently\n","import React from \"react\"\nimport { Link } from \"gatsby\"\n\nimport moment from \"moment\"\n\nimport styled from \"styled-components\"\nimport theme from \"styled-theming\"\n\nimport { rhythm, scale } from \"../../../utils/typography\"\nimport { withSizes } from \"../../../utils/helpers\"\n\nimport Icon from \"../../../components/Icon\"\nimport TagLink from \"../../../components/TagLink\"\nimport CategoryLink from \"../../../components/CategoryLink\"\nimport SeriesLink from \"../../../components/SeriesLink\"\n\nconst Container = styled.div`\n  padding: 0;\n  margin: 0;\n\n  &:hover {\n    background-color: ${theme(\"mode\", {\n      light: \"#00000005\",\n      dark: \"#FFFFFF05\",\n    })} !important;\n    @media screen and (max-width: 1024px) {\n      background-color: #0000 !important;\n    }\n  }\n`\n\nconst Title = styled.div`\n  padding: 0;\n  font-size: ${rhythm(0.8)};\n  margin: ${rhythm(0.5)} 0;\n  @media screen and (max-width: 1024px) {\n    font-size: ${rhythm(0.9)};\n  }\n  @media screen and (max-width: 480px) {\n    font-size: 18px !important;\n  }\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n`\n\nconst Pair = styled.div`\n  white-space: nowrap;\n`\n\nconst Item = ({ fields = {}, excerpt, isDesktop }) => {\n  const title = fields.title || fields.slug\n\n  return (\n    <Container>\n      <Title>\n        <Link to={`${fields.url}`}>{title}</Link>\n        <Pair>\n          {fields.date && <Icon type=\"r\" id=\"calendar\" />}\n          {fields.date && moment(fields.date).format(\"YYYY-MM-DD\")}\n        </Pair>\n      </Title>\n    </Container>\n  )\n}\n\nexport default withSizes(Item)\n","import React from \"react\"\nimport { Link, graphql } from \"gatsby\"\n\nimport styled from \"styled-components\"\n\nimport moment from \"moment\"\nimport \"moment/locale/zh-cn\"\n\nimport { rhythm } from \"../../../utils/typography\"\n\nimport Cell from \"./Cell\"\nimport Column from \"./Column\"\n\nconst Container = styled.div`\n  width: auto;\n  h2 {\n    margin: ${rhythm(1)} 0;\n  }\n`\n\nconst CellsContainer = styled.div`\n  width: auto;\n  display: flex;\n  justify-content: flex-start;\n  align-items: flex-start;\n  flex-direction: row;\n  flex-wrap: nowrap;\n`\n\nconst Example = styled.div`\n  margin-left: ${rhythm(1)};\n  margin-top: ${rhythm(1)};\n  width: auto;\n  display: flex;\n  justify-content: flex-start;\n  align-items: center;\n  flex-direction: row;\n  flex-wrap: nowrap;\n  * {\n    margin: 0 ${rhythm(0.2)};\n  }\n`\n\nconst UpdateFrequency = ({ updates = [] }) => {\n  const now = moment()\n  const begin = moment().year(now.year() - 1)\n  const weeks = now.clone().subtract(begin).get(\"weeks\")\n  // console.log(\"weeks\", weeks)\n  const findUpdate = m => {\n    for (let i = 0; i < updates.length; i++) {\n      const update = updates[i]\n      if (update.year === m.weekYear() && update.weekOfYear === m.weeks()) {\n        // console.log(\"update\", update)\n        return { ...update, month: m.month() }\n      }\n    }\n    // console.log(\"m\", m.format(\"YYYY-MM-DD\"), m.weekYear(), m.weeks())\n    return {\n      year: m.weekYear(),\n      month: m.month(),\n      weeksInYear: m.weeksInYear(),\n      weekOfYear: m.weeks(),\n      articles: [],\n    }\n  }\n\n  const cells = []\n  for (let i = 0; i < weeks; i++) {\n    const it = now.clone().subtract(moment.duration(i, \"weeks\"))\n    const found = findUpdate(it)\n    cells.push(found)\n  }\n  const columns = []\n  const findColumn = cell => {\n    for (let i = 0; i < columns.length; i++) {\n      const column = columns[i]\n      if (cell.month === column.month) {\n        return column\n      }\n    }\n    const column = {\n      year: cell.year,\n      month: cell.month,\n      updates: [],\n    }\n    columns.push(column)\n    return column\n  }\n  for (let i = 0; i < cells.length; i++) {\n    const cell = cells[i]\n    const column = findColumn(cell)\n    column.updates.push(cell)\n  }\n\n  // console.log(\"columns\", columns)\n  return (\n    <Container>\n      <h2>更新频率</h2>\n      <CellsContainer>\n        {columns.map((column, i) => <Column key={i} {...column} />).reverse()}\n      </CellsContainer>\n      <Example>\n        更少\n        <Cell update={{ articles: [] }} />\n        <Cell update={{ articles: [false] }} />\n        <Cell update={{ articles: [false, false] }} />\n        <Cell update={{ articles: [false, false, false] }} />\n        <Cell update={{ articles: [false, false, false, false] }} />\n        更多\n      </Example>\n    </Container>\n  )\n}\n\nexport default UpdateFrequency\n"],"sourceRoot":""}