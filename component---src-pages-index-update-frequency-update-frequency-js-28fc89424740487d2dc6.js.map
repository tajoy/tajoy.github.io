{"version":3,"sources":["webpack:///./src/pages/index/update-frequency/Column.js","webpack:///./node_modules/moment/locale/zh-cn.js","webpack:///./src/pages/index/update-frequency/Cell.js","webpack:///./src/pages/index/update-frequency/UpdateFrequency.js"],"names":["Container","styled","div","rhythm","YearOrMonth","Column","year","month","updates","map","update","i","key","moment","defineLocale","months","split","monthsShort","weekdays","weekdaysShort","weekdaysMin","longDateFormat","LT","LTS","L","LL","LLL","LLLL","l","ll","lll","llll","meridiemParse","meridiemHour","hour","meridiem","minute","isLower","hm","calendar","sameDay","nextDay","nextWeek","lastDay","lastWeek","sameElse","dayOfMonthOrdinalParse","ordinal","number","period","relativeTime","future","past","s","ss","m","mm","h","hh","d","dd","M","MM","y","yy","week","dow","doy","factory","props","theme","light","LIGHT","UPDATE","FREQUENCY","Math","min","articles","length","dark","DARK","HoverPopup","transition","Content","Corner","Cell","setShowPopup","show","self","e","setState","showPopup","state","render","this","popup","weekOfYear","day","begin","clone","format","end","in","unmountOnExit","timeout","article","title","onMouseEnter","onMouseLeave","React","Component","CellsContainer","Example","UpdateFrequency","now","weeks","subtract","get","findUpdate","weekYear","weeksInYear","cells","found","duration","push","columns","findColumn","cell","column","reverse"],"mappings":"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","file":"component---src-pages-index-update-frequency-update-frequency-js-28fc89424740487d2dc6.js","sourcesContent":["import React from \"react\"\nimport { Link, graphql } from \"gatsby\"\n\nimport styled from \"styled-components\"\n\nimport moment from \"moment\"\nimport \"moment/locale/zh-cn\"\n\nimport { rhythm } from \"../../../utils/typography\"\n\nimport theme from \"styled-theming\"\n\nimport { LIGHT, DARK } from \"../../../theme/colors\"\n\nimport Cell from \"./Cell\"\n\nconst Container = styled.div`\n  margin: 0 2px;\n  margin-top: ${rhythm(2)};\n  width: 26px;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n`\n\nconst YearOrMonth = styled.div`\n  margin: 0 8px;\n  white-space: nowrap;\n  height: ${rhythm(1)};\n  text-align: center;\n  transform: translateX(4px) rotate(-90deg);\n`\n\nconst Column = ({ year, month, updates = [] }) => {\n  return (\n    <Container>\n      <YearOrMonth>\n        {month === 0\n          ? `${year} 年`\n          : (month + 1) % 3 === 0 && month !== 11\n          ? `${month + 1} 月`\n          : \"\"}\n      </YearOrMonth>\n      {updates.map((update, i) => (\n        <Cell key={i} update={update} />\n      ))}\n    </Container>\n  )\n}\n\nexport default Column\n","require(\"core-js/modules/es6.regexp.split\");\n\n//! moment.js locale configuration\n//! locale : Chinese (China) [zh-cn]\n//! author : suupic : https://github.com/suupic\n//! author : Zeno Zeng : https://github.com/zenozeng\n;\n\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' && typeof require === 'function' ? factory(require('../moment')) : typeof define === 'function' && define.amd ? define(['../moment'], factory) : factory(global.moment);\n})(this, function (moment) {\n  'use strict'; //! moment.js locale configuration\n\n  var zhCn = moment.defineLocale('zh-cn', {\n    months: '一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月'.split('_'),\n    monthsShort: '1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月'.split('_'),\n    weekdays: '星期日_星期一_星期二_星期三_星期四_星期五_星期六'.split('_'),\n    weekdaysShort: '周日_周一_周二_周三_周四_周五_周六'.split('_'),\n    weekdaysMin: '日_一_二_三_四_五_六'.split('_'),\n    longDateFormat: {\n      LT: 'HH:mm',\n      LTS: 'HH:mm:ss',\n      L: 'YYYY/MM/DD',\n      LL: 'YYYY年M月D日',\n      LLL: 'YYYY年M月D日Ah点mm分',\n      LLLL: 'YYYY年M月D日ddddAh点mm分',\n      l: 'YYYY/M/D',\n      ll: 'YYYY年M月D日',\n      lll: 'YYYY年M月D日 HH:mm',\n      llll: 'YYYY年M月D日dddd HH:mm'\n    },\n    meridiemParse: /凌晨|早上|上午|中午|下午|晚上/,\n    meridiemHour: function meridiemHour(hour, meridiem) {\n      if (hour === 12) {\n        hour = 0;\n      }\n\n      if (meridiem === '凌晨' || meridiem === '早上' || meridiem === '上午') {\n        return hour;\n      } else if (meridiem === '下午' || meridiem === '晚上') {\n        return hour + 12;\n      } else {\n        // '中午'\n        return hour >= 11 ? hour : hour + 12;\n      }\n    },\n    meridiem: function meridiem(hour, minute, isLower) {\n      var hm = hour * 100 + minute;\n\n      if (hm < 600) {\n        return '凌晨';\n      } else if (hm < 900) {\n        return '早上';\n      } else if (hm < 1130) {\n        return '上午';\n      } else if (hm < 1230) {\n        return '中午';\n      } else if (hm < 1800) {\n        return '下午';\n      } else {\n        return '晚上';\n      }\n    },\n    calendar: {\n      sameDay: '[今天]LT',\n      nextDay: '[明天]LT',\n      nextWeek: '[下]ddddLT',\n      lastDay: '[昨天]LT',\n      lastWeek: '[上]ddddLT',\n      sameElse: 'L'\n    },\n    dayOfMonthOrdinalParse: /\\d{1,2}(日|月|周)/,\n    ordinal: function ordinal(number, period) {\n      switch (period) {\n        case 'd':\n        case 'D':\n        case 'DDD':\n          return number + '日';\n\n        case 'M':\n          return number + '月';\n\n        case 'w':\n        case 'W':\n          return number + '周';\n\n        default:\n          return number;\n      }\n    },\n    relativeTime: {\n      future: '%s后',\n      past: '%s前',\n      s: '几秒',\n      ss: '%d 秒',\n      m: '1 分钟',\n      mm: '%d 分钟',\n      h: '1 小时',\n      hh: '%d 小时',\n      d: '1 天',\n      dd: '%d 天',\n      M: '1 个月',\n      MM: '%d 个月',\n      y: '1 年',\n      yy: '%d 年'\n    },\n    week: {\n      // GB/T 7408-1994《数据元和交换格式·信息交换·日期和时间表示法》与ISO 8601:1988等效\n      dow: 1,\n      // Monday is the first day of the week.\n      doy: 4 // The week that contains Jan 4th is the first week of the year.\n\n    }\n  });\n  return zhCn;\n});","import React from \"react\"\nimport { Link, graphql } from \"gatsby\"\n\nimport styled from \"styled-components\"\nimport transition from \"styled-transition-group\"\n\nimport moment from \"moment\"\nimport \"moment/locale/zh-cn\"\n\nimport { rhythm } from \"../../../utils/typography\"\n\nimport theme from \"styled-theming\"\n\nimport { LIGHT, DARK } from \"../../../theme/colors\"\n\nconst Container = styled.div`\n  width: 24px;\n  height: 24px;\n  background-color: ${props =>\n    theme(\"mode\", {\n      light: LIGHT.UPDATE.FREQUENCY[Math.min(props.update.articles.length, 4)],\n      dark: DARK.UPDATE.FREQUENCY[Math.min(props.update.articles.length, 4)],\n    })};\n  border-radius: 4px;\n  border: 1px solid #0006;\n  margin: 2px;\n`\n\nconst HoverPopup = transition.div`\n  position: relative;\n  z-index: 999;\n  pointer-events: none;\n  width: ${rhythm(6)};\n\n  transform: translate(-45%, -100%);\n\n  &:enter {\n    opacity: 0.01;\n  }\n  &:enter-active {\n    opacity: 1;\n    transition: 500ms ease-in;\n  }\n  &:exit {\n    opacity: 1;\n  }\n  &:exit-active {\n    opacity: 0.01;\n    transition: 500ms ease-out;\n  }\n`\nconst Content = styled.div`\n  width: ${rhythm(6)};\n  background-color: white;\n  border: 1px solid #666;\n  z-index: 20;\n\n  h3 {\n    margin: ${rhythm(0.1)};\n    padding: 0;\n    color: black !important;\n    font-size: ${rhythm(0.5)} !important;\n    text-shadow: none !important;\n  }\n  p {\n    margin: ${rhythm(0.1)};\n    margin-top: ${rhythm(0.3)};\n    margin-left: ${rhythm(0.5)};\n    padding: 0;\n    color: black;\n    font-size: ${rhythm(0.5)} !important;\n  }\n`\n\nconst Corner = styled.div`\n  position: relative;\n  margin-top: ${rhythm(-0.5)};\n  width: ${rhythm(0.8)};\n  height: ${rhythm(0.8)};\n  background-color: white;\n  border: 1px solid #666;\n  transform: translate(${rhythm(2.65)}, ${rhythm(-0.05)}) rotate(-45deg);\n  z-index: -20;\n`\n\nclass Cell extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      showPopup: false,\n    }\n  }\n\n  setShowPopup = show => {\n    const self = this\n    return e => {\n      self.setState({ showPopup: show })\n    }\n  }\n\n  render() {\n    const { showPopup } = this.state\n    const { update } = this.props\n    // console.log(\"update\", update)\n    let popup = null\n  if (update === null || update === undefined) return <></>\n    if (update.articles && update.articles[0] && update.articles[0]) {\n      const week = moment().year(update.year).week(update.weekOfYear).day(0)\n      const begin = week.clone().day(0).format(\"ll\")\n      const end = week.clone().day(6).format(\"ll\")\n      popup = (\n        <HoverPopup in={showPopup} unmountOnExit timeout={500}>\n          <Content>\n            <h3>日期:</h3>\n            <p>{begin}</p>\n            <p> - {end}</p>\n            <h3>发布文章:</h3>\n            {update.articles.map((article, i) => (\n              <p key={i}>{article.title}</p>\n            ))}\n          </Content>\n          <Corner />\n        </HoverPopup>\n      )\n    }\n    return (\n      <Container\n        update={update}\n        onMouseEnter={this.setShowPopup(true)}\n        onMouseLeave={this.setShowPopup(false)}\n      >\n        {popup}\n      </Container>\n    )\n  }\n}\n\nexport default Cell\n","import React from \"react\"\nimport { Link, graphql } from \"gatsby\"\n\nimport styled from \"styled-components\"\n\nimport moment from \"moment\"\nimport \"moment/locale/zh-cn\"\n\nimport { rhythm } from \"../../../utils/typography\"\n\nimport Cell from \"./Cell\"\nimport Column from \"./Column\"\n\nconst Container = styled.div`\n  width: auto;\n  h2 {\n    margin: ${rhythm(1)} 0;\n  }\n`\n\nconst CellsContainer = styled.div`\n  width: auto;\n  display: flex;\n  justify-content: flex-start;\n  align-items: flex-start;\n  flex-direction: row;\n  flex-wrap: nowrap;\n`\n\nconst Example = styled.div`\n  margin-left: ${rhythm(1)};\n  margin-top: ${rhythm(1)};\n  width: auto;\n  display: flex;\n  justify-content: flex-start;\n  align-items: center;\n  flex-direction: row;\n  flex-wrap: nowrap;\n  * {\n    margin: 0 ${rhythm(0.2)};\n  }\n`\n\nconst UpdateFrequency = ({ updates = [] }) => {\n  const now = moment()\n  const begin = moment().year(now.year() - 1)\n  const weeks = now.clone().subtract(begin).get(\"weeks\")\n  // console.log(\"weeks\", weeks)\n  const findUpdate = m => {\n    for (let i = 0; i < updates.length; i++) {\n      const update = updates[i]\n      if (update.year === m.weekYear() && update.weekOfYear === m.weeks()) {\n        // console.log(\"update\", update)\n        return { ...update, month: m.month() }\n      }\n    }\n    // console.log(\"m\", m.format(\"YYYY-MM-DD\"), m.weekYear(), m.weeks())\n    return {\n      year: m.weekYear(),\n      month: m.month(),\n      weeksInYear: m.weeksInYear(),\n      weekOfYear: m.weeks(),\n      articles: [],\n    }\n  }\n\n  const cells = []\n  for (let i = 0; i < weeks; i++) {\n    const it = now.clone().subtract(moment.duration(i, \"weeks\"))\n    const found = findUpdate(it)\n    cells.push(found)\n  }\n  const columns = []\n  const findColumn = cell => {\n    for (let i = 0; i < columns.length; i++) {\n      const column = columns[i]\n      if (cell.month === column.month) {\n        return column\n      }\n    }\n    const column = {\n      year: cell.year,\n      month: cell.month,\n      updates: [],\n    }\n    columns.push(column)\n    return column\n  }\n  for (let i = 0; i < cells.length; i++) {\n    const cell = cells[i]\n    const column = findColumn(cell)\n    column.updates.push(cell)\n  }\n\n  // console.log(\"columns\", columns)\n  return (\n    <Container>\n      <h2>更新频率</h2>\n      <CellsContainer>\n        {columns.map((column, i) => <Column key={i} {...column} />).reverse()}\n      </CellsContainer>\n      <Example>\n        更少\n        <Cell update={{ articles: [] }} />\n        <Cell update={{ articles: [false] }} />\n        <Cell update={{ articles: [false, false] }} />\n        <Cell update={{ articles: [false, false, false] }} />\n        <Cell update={{ articles: [false, false, false, false] }} />\n        更多\n      </Example>\n    </Container>\n  )\n}\n\nexport default UpdateFrequency\n"],"sourceRoot":""}